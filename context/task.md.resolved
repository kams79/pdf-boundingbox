# PDF Bounding Box ‚Äî Project Tasks

## Phase 1: Project Initialization
- [x] Bootstrap React + TypeScript + Vite project
- [x] Install all dependencies (react-pdf, tesseract.js, pdf-lib, fabric, zustand)
- [x] Configure Vite for PDF.js worker and WASM support
- [x] Set up [tsconfig.json](file:///d:/Project/pdf-boudingbox/tsconfig.json) with strict mode

## Phase 2: Types & Shared Interfaces
- [x] Create [src/types/index.ts](file:///d:/Project/pdf-boudingbox/src/types/index.ts) with OCRBBox, OCRWord, OCRResult, Annotation, FieldAnnotation interfaces

## Phase 3: Services
- [x] Create [src/services/ocrService.ts](file:///d:/Project/pdf-boudingbox/src/services/ocrService.ts) ‚Äî Tesseract.js OCR pipeline
- [x] Create [src/services/annotationStore.ts](file:///d:/Project/pdf-boudingbox/src/services/annotationStore.ts) ‚Äî Zustand annotation store
- [x] Create [src/services/pdfExport.ts](file:///d:/Project/pdf-boudingbox/src/services/pdfExport.ts) ‚Äî pdf-lib export helpers
- [x] Create [src/services/pdfTextExtractor.ts](file:///d:/Project/pdf-boudingbox/src/services/pdfTextExtractor.ts) ‚Äî auto-detect pre-digitized PDFs via `getTextContent()`
- [x] Create [src/services/fieldStore.ts](file:///d:/Project/pdf-boudingbox/src/services/fieldStore.ts) ‚Äî Zustand store for FieldAnnotations
- [x] Create [src/utils/textCapture.ts](file:///d:/Project/pdf-boudingbox/src/utils/textCapture.ts) ‚Äî character-level text capture within a bbox

## Phase 4: Core Components
- [x] [PDFViewer.tsx](file:///d:/Project/pdf-boudingbox/src/components/PDFViewer.tsx) ‚Äî react-pdf Document/Page, navigation, scaling, page proxy callback
- [x] [BoundingBoxOverlay.tsx](file:///d:/Project/pdf-boudingbox/src/components/BoundingBoxOverlay.tsx) ‚Äî word boxes, click-select, Shift+multi-select, draw-rect with live preview, label popup, field borders
- [x] [DrawingLayer.tsx](file:///d:/Project/pdf-boudingbox/src/components/DrawingLayer.tsx) ‚Äî Fabric.js freehand/shape annotations
- [x] [HighlightLayer.tsx](file:///d:/Project/pdf-boudingbox/src/components/HighlightLayer.tsx) ‚Äî text highlights
- [x] [Toolbar.tsx](file:///d:/Project/pdf-boudingbox/src/components/Toolbar.tsx) ‚Äî zoom, OCR, export, open file, üè∑ Field mode
- [x] [Sidebar.tsx](file:///d:/Project/pdf-boudingbox/src/components/Sidebar.tsx) ‚Äî OCR Text / Words / Fields / Markup tabs

## Phase 5: App Composition
- [x] [src/App.tsx](file:///d:/Project/pdf-boudingbox/src/App.tsx) ‚Äî all components wired, fieldStore hooked, canvasCSSSize for overlay alignment
- [x] [src/main.tsx](file:///d:/Project/pdf-boudingbox/src/main.tsx) ‚Äî entry point
- [x] [src/index.css](file:///d:/Project/pdf-boudingbox/src/index.css) ‚Äî dark theme, field annotation styles, draw-preview styles

## Phase 6: Bug Fixes
- [x] Fix PDF worker version mismatch (CDN URL pinned to pdfjs.version)
- [x] Fix bounding box overlay misalignment (DPR normalization ‚Üí [0‚Äì1] bbox, % positioning)
- [x] Fix page-container sizing (overlay was 2222px vs 1010px canvas ‚Äî added explicit canvasCSSSize)
- [x] Fix draw-rect text capture (center-point containment + character-level slicing)

## Phase 7: Verification ‚úÖ
- [x] TypeScript: zero errors throughout
- [x] PDF loads and renders pages
- [x] Bounding boxes align with visible text
- [x] OCR runs and bounding boxes appear
- [x] Auto-detect pre-digitized PDF ‚Äî boxes appear without manual OCR
- [x] Field mode ‚Äî click words, label them, appear in Fields sidebar tab
- [x] Field mode ‚Äî draw rectangle, captures only characters inside box
- [x] Freehand drawing and rectangle annotation
- [x] Text selection highlight
- [x] Export searchable PDF
- [x] Annotation list in sidebar
- [x] Toolbar cleaned up ‚Äî removed Select/Highlight/Rectangle/Draw, kept only üè∑ Field
